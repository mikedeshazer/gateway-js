(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{362:function(e){e.exports=[{constant:!1,inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"bytes32",name:"_nHash",type:"bytes32"},{internalType:"bytes",name:"_sig",type:"bytes"}],name:"shiftIn",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"registry",outputs:[{internalType:"contract IShifterRegistry",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"bytes",name:"_to",type:"bytes"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"shiftOut",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"addr",type:"address"}],name:"balance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IShifterRegistry",name:"_registry",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"}]},363:function(e){e.exports=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}]},364:function(e){e.exports=[{constant:!0,inputs:[{name:"_tokenAddress",type:"address"}],name:"getShifterByToken",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"claimOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"renounceOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenSymbol",type:"string"}],name:"getShifterBySymbol",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_start",type:"address"},{name:"_count",type:"uint256"}],name:"getShiftedTokens",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_tokenAddress",type:"address"},{name:"_shifterAddress",type:"address"}],name:"setShifter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_symbol",type:"string"}],name:"removeShifter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_tokenAddress",type:"address"},{name:"_newShifterAddress",type:"address"}],name:"updateShifter",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_start",type:"address"},{name:"_count",type:"uint256"}],name:"getShifters",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_tokenSymbol",type:"string"}],name:"getTokenBySymbol",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"_symbol",type:"string"},{indexed:!0,name:"_indexedSymbol",type:"string"},{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_shifterAddress",type:"address"}],name:"LogShifterRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_symbol",type:"string"},{indexed:!0,name:"_indexedSymbol",type:"string"},{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_shifterAddress",type:"address"}],name:"LogShifterDeregistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_tokenAddress",type:"address"},{indexed:!0,name:"_currentShifterAddress",type:"address"},{indexed:!0,name:"_newShifterAddress",type:"address"}],name:"LogShifterUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"previousOwner",type:"address"},{indexed:!0,name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"}]},367:function(e,t,n){e.exports=n(901)},372:function(e,t,n){},387:function(e,t){},393:function(e,t){},412:function(e,t){},414:function(e,t){},47:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=47},518:function(e,t){},718:function(e,t){},899:function(e,t,n){},901:function(e,t,n){"use strict";n.r(t);var a=n(23),s=n.n(a),r=n(358),o=n.n(r),i=(n(372),n(27)),u=n.n(i),p=n(85),c=n(164),d=n(359),y=n(365),l=n(360),m=n(366),f=n(165),b=n.n(f),h=n(219),w=function(e){var t=document.getElementById(e);if(!t)throw new Error("Unable to find element ".concat(e));return t};function _(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}var g=function e(){var t=this;Object(c.a)(this,e),this.paused=!1,this.getPopup=function(){return w("_ren_gateway-".concat(t.id))},this.getIFrame=function(){return w("_ren_iframe-".concat(t.id))},this.getOrCreateGatewayContainer=function(){try{return w("_ren_gatewayContainer")}catch(n){}var e=[].concat(Object(h.a)(Array.from(document.getElementsByTagName("body"))||[]),Object(h.a)(Array.from(document.getElementsByTagName("html"))||[])),t=_('\n<div id="_ren_gatewayContainer" id="_ren_gatewayContainer">\n    <style>\n        #_ren_gatewayContainer {\n            all: unset;\n        }\n    </style>\n</div>\n');return e[0]&&t&&e[0].insertBefore(t,e[0].lastChild),w("_ren_gatewayContainer")},this.sendMessage=function(e,n){var a=t.getIFrame();a&&a.contentWindow.postMessage({from:"ren",type:e,payload:n},"*")},this.close=function(){try{var e=t.getPopup();e.parentElement&&e.parentElement.removeChild(e)}catch(n){console.error(n)}},this._pause=function(){t.paused=!0,t.getPopup().classList.add("_ren_gateway-minified")},this._resume=function(){t.paused=!1,t.getPopup().classList.remove("_ren_gateway-minified")},this.pause=function(){t.sendMessage("pause",{}),t._pause()},this.resume=function(){t.sendMessage("resume",{}),t._resume()},this.open=function(){var e=Object(p.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){var s;try{s=t.getPopup()}catch(u){}if(s)throw new Error("GatewayJS already open");var r,o=t.getOrCreateGatewayContainer(),i=_((r=t.id,'\n<div class="_ren_gateway" id="_ren_gateway-'.concat(r,'">\n    <style>\n    ._ren_overlay {\n        width: 100vw;\n        height: 100vh;\n        top: 0;\n        left: 0;\n        position: absolute;\n        background: rgba(0, 0, 0, 0.7);\n        z-index:1000000;\n    }\n\n    ._ren_iframeShadow {\n        box-shadow: 0 20px 40px 0 rgba(0,0,0,0.5);\n        border-radius: 6px;\n        background:#fff;\n        position:absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        width:460px;\n        height:410px;\n        z-index:1000000;\n        transition: all 300ms;\n    }\n\n    ._ren_gateway-minified ._ren_iframeShadow {\n        top: 10px;\n        right: 10px;\n        left: unset;\n        transform: translate(0%, 0%);\n        width:250px;\n        height:50px;\n        box-shadow: 0 5px 10px 0 rgba(0,0,0,0.5);\n    }\n\n    ._ren_gateway-minified ._ren_overlay {\n        display: none;\n    }\n\n    ._ren_iframe {\n        border-radius: 6px;\n        height: 100%;\n        width: 100%;\n        border: none;\n    }\n    </style>\n    <div class="_ren_overlay"></div>\n    <div class="_ren_iframeShadow" id="_ren_iframeShadow-').concat(r,'">\n        <iframe class="_ren_iframe" id="_ren_iframe-').concat(r,'" style=""\n            src="https://gateway-js.herokuapp.com/" ></iframe>\n    </div>\n</div>\n')));i&&o.insertBefore(i,o.lastChild),window.onmessage=function(s){if(s.data&&"ren"===s.data.from)switch(console.log("New message! ".concat(s.data.type)),s.data.type){case"ready":t.sendMessage("shift",{sendToken:n.sendToken,sendTo:n.sendTo,sendAmount:n.sendAmount,contractFn:n.contractFn,contractParams:n.contractParams}),t.paused&&(console.log("Asking them to pause!!!"),t.pause());break;case"pause":t._pause();break;case"resume":t._resume();break;case"cancel":t.close(),a(s.data.payload);break;case"done":t.close(),e(s.data.payload)}}}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.id="1234"};g.askForAddress=function(e){return"__renAskForAddress__".concat(e?e.toUpperCase():"")};var v=g,x=n(361),k=n.n(x),M=n(218),S=n.n(M),T=(n(899),n(362)),E=n(363),O=n(364),A="0xbA563a8510d86dE95F5a50007E180d6d4966ad12",C="0xa2aE9111634F5983e4e1C3E3823914841a4c7235",B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(y.a)(this,Object(l.a)(t).call(this,e))).updateBalance=Object(p.a)(u.a.mark(function e(){var t,a,s,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.web3,a=new t.eth.Contract(T,C),e.next=4,t.eth.getAccounts();case 4:return s=e.sent[0],e.next=7,a.methods.balance(s).call();case 7:r=e.sent,n.setState({balance:parseInt(r.toString())/Math.pow(10,8)});case 9:case"end":return e.stop()}},e)})),n.log=function(e){n.setState({message:e})},n.deposit=Object(p.a)(u.a.mark(function e(){var t,a,s,r,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("inside deposit!"),t=n.state,a=t.web3,t.sdk,s=new S.a("0.00015"),e.next=5,a.eth.getAccounts();case 5:return r=e.sent[0],console.log("Using address ".concat(r,"!!!")),e.next=9,(new v).open({sendToken:b.a.Tokens.BTC.Btc2Eth,sendAmount:s.times(Math.pow(10,8)).toNumber(),sendTo:C,contractFn:"shiftIn",contractParams:[{name:"_to",type:"address",value:r}]}).catch(function(e){console.log(e),n.log(e.message||String(e))});case 9:o=e.sent,n.log(JSON.stringify(o));case 11:case"end":return e.stop()}},e)})),n.withdraw=Object(p.a)(u.a.mark(function e(){var t,a,s,r,o,i,p,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.web3,t.sdk,t.balance,s=15e-5,e.next=4,a.eth.getAccounts();case 4:return r=e.sent[0],o=new a.eth.Contract(O,A),e.next=8,o.methods.getTokenBySymbol("zBTC").call();case 8:return i=e.sent,p=new a.eth.Contract(E,i),e.next=12,new Promise(function(e,t){p.methods.approve(C,Math.floor(s*Math.pow(10,8))).send({from:r}).on("transactionHash",e).catch(t)}).catch(function(e){return n.log(e.message||String(e))});case 12:return e.next=14,(new v).open({sendToken:b.a.Tokens.BTC.Eth2Btc,sendTo:C,contractFn:"shiftOut",contractParams:[{name:"_to",type:"bytes",value:v.askForAddress()},{name:"_to",type:"uint256",value:Math.floor(s*Math.pow(10,8))}]}).catch(function(e){return n.log(e.message||String(e))});case 14:c=e.sent,n.log(JSON.stringify(c));case 16:case"end":return e.stop()}},e)})),n.state={balance:0,message:"",sdk:new b.a("testnet")},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,a=this;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=12;break}return t=window.ethereum,e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("User denied account access");case 10:e.next=13;break;case 12:window.web3?t=window.web3.currentProvider:this.log("Please install MetaMask!");case 13:n=new k.a(t),this.setState({web3:n},function(){a.updateBalance(),setInterval(function(){a.updateBalance()},1e4)});case 15:case"end":return e.stop()}},e,this,[[2,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.balance,n=e.message;return s.a.createElement("div",{className:"App"},s.a.createElement("h1",null,"RenVM demo"),s.a.createElement("p",null,s.a.createElement("b",null,"This demo is on ",s.a.createElement("i",null,"testnet"),". Do not send real funds.")),s.a.createElement("p",null,"Balance: ",s.a.createElement("b",null,t," BTC")," on Ethereum"),s.a.createElement("p",null,s.a.createElement("button",{onClick:this.deposit},"Deposit 0.00015 BTC")),s.a.createElement("p",null,s.a.createElement("button",{onClick:this.withdraw},"Withdraw 0.00015 BTC")),s.a.createElement("p",null,n))}}]),t}(s.a.Component);o.a.render(s.a.createElement(B,null),document.getElementById("root"))}},[[367,1,2]]]);
//# sourceMappingURL=main.e5e84f4b.chunk.js.map